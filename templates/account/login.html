{% extends "account/base.html" %}
{% load i18n %}
{% load socialaccount %}

{% block header_title %}Sign In{% endblock %}
{% block header_subtitle %}Welcome back, racer!{% endblock %}

{% block content %}
{% get_providers as socialaccount_providers %}

<form method="POST" action="{% url 'account_login' %}">
    {% csrf_token %}

    <div class="form-group">
        <label class="form-label" for="id_login">
            {% trans "Email Address" %}
        </label>
        <input
            type="email"
            name="login"
            placeholder="user1@test.com"
            autocomplete="email"
            required
            id="id_login"
            class="form-input"
            value="{{ form.login.value|default:'' }}"
        >
        {% if form.login.errors %}
            <ul class="errorlist">
                {% for error in form.login.errors %}
                <li>{{ error }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    </div>

    <div class="form-group">
        <label class="form-label" for="id_password">
            {% trans "Password" %}
        </label>
        <input
            type="password"
            name="password"
            placeholder="••••••••"
            autocomplete="current-password"
            required
            id="id_password"
            class="form-input"
        >
        {% if form.password.errors %}
            <ul class="errorlist">
                {% for error in form.password.errors %}
                <li>{{ error }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    </div>

    <div class="form-group" style="display: flex; align-items: center; gap: var(--spacing-sm);">
        <input
            type="checkbox"
            name="remember"
            id="id_remember"
            style="width: auto;"
        >
        <label for="id_remember" style="margin: 0; font-weight: normal; text-transform: none; letter-spacing: normal; font-size: var(--font-size-base);">
            {% trans "Remember Me" %}
        </label>
    </div>

    {% if form.non_field_errors %}
        <ul class="errorlist">
            {% for error in form.non_field_errors %}
            <li>{{ error }}</li>
            {% endfor %}
        </ul>
    {% endif %}

    {% if redirect_field_value %}
    <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}" />
    {% endif %}

    <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: var(--spacing-lg);">
        {% trans "Sign In" %}
    </button>

    <div style="text-align: center; margin-top: var(--spacing-md);">
        <a href="{% url 'account_reset_password' %}" style="color: var(--color-text-secondary); font-size: var(--font-size-sm);">
            {% trans "Forgot Password?" %}
        </a>
    </div>
</form>

{% if socialaccount_providers %}
<div class="social-login">
    <div class="social-login-title">Or sign in with</div>
    <div class="socialaccount_providers">
        {% for provider in socialaccount_providers %}
            <a href="{% provider_login_url provider.id %}" class="btn btn-secondary">
                Sign in with {{ provider.name }}
            </a>
        {% endfor %}
    </div>
</div>
{% endif %}

<div style="margin-top: var(--spacing-xl); padding: var(--spacing-md); background: var(--color-dark-700); border-radius: var(--radius-md); font-size: var(--font-size-sm);">
    <strong style="color: var(--color-text-primary);">Test Credentials:</strong><br>
    <span style="color: var(--color-text-secondary);">
        Email: <code style="color: var(--color-secondary);">user1@test.com</code><br>
        Password: <code style="color: var(--color-secondary);">test123</code>
    </span>
</div>
{% endblock %}

{% block footer %}
<p>
    Don't have an account?
    <a href="{% url 'account_signup' %}">Sign Up</a>
</p>
{% endblock %}
