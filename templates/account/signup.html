{% extends "account/base.html" %}
{% load i18n %}
{% load socialaccount %}

{% block header_title %}Sign Up{% endblock %}
{% block header_subtitle %}Join the race!{% endblock %}

{% block content %}
<form method="POST" action="{% url 'account_signup' %}">
    {% csrf_token %}

    <div class="form-group">
        <label class="form-label" for="id_email">
            {% trans "Email Address" %}
        </label>
        <input
            type="email"
            name="email"
            placeholder="your.email@example.com"
            autocomplete="email"
            required
            id="id_email"
            class="form-input"
            value="{{ form.email.value|default:'' }}"
        >
        {% if form.email.errors %}
            <ul class="errorlist">
                {% for error in form.email.errors %}
                <li>{{ error }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    </div>

    <div class="form-group">
        <label class="form-label" for="id_password1">
            {% trans "Password" %}
        </label>
        <input
            type="password"
            name="password1"
            placeholder="••••••••"
            autocomplete="new-password"
            required
            id="id_password1"
            class="form-input"
        >
        {% if form.password1.errors %}
            <ul class="errorlist">
                {% for error in form.password1.errors %}
                <li>{{ error }}</li>
                {% endfor %}
            </ul>
        {% endif %}
        <small style="color: var(--color-text-muted); font-size: var(--font-size-xs); display: block; margin-top: var(--spacing-xs);">
            Password must be at least 8 characters
        </small>
    </div>

    <div class="form-group">
        <label class="form-label" for="id_password2">
            {% trans "Password (again)" %}
        </label>
        <input
            type="password"
            name="password2"
            placeholder="••••••••"
            autocomplete="new-password"
            required
            id="id_password2"
            class="form-input"
        >
        {% if form.password2.errors %}
            <ul class="errorlist">
                {% for error in form.password2.errors %}
                <li>{{ error }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    </div>

    {% if form.non_field_errors %}
        <ul class="errorlist">
            {% for error in form.non_field_errors %}
            <li>{{ error }}</li>
            {% endfor %}
        </ul>
    {% endif %}

    {% if redirect_field_value %}
    <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}" />
    {% endif %}

    <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: var(--spacing-lg);">
        {% trans "Sign Up" %}
    </button>
</form>

{% if socialaccount_providers %}
<div class="social-login">
    <div class="social-login-title">Or sign up with</div>
    <div class="socialaccount_providers">
        {% for provider in socialaccount_providers %}
            <a href="{% provider_login_url provider.id %}" class="btn btn-secondary">
                Sign up with {{ provider.name }}
            </a>
        {% endfor %}
    </div>
</div>
{% endif %}
{% endblock %}

{% block footer %}
<p>
    Already have an account?
    <a href="{% url 'account_login' %}">Sign In</a>
</p>
{% endblock %}
